import java.util.Queue;
import java.util.Timer;
import java.util.TimerTask;
import java.util.concurrent.ArrayBlockingQueue;

public abstract class Controller implements ControllerObserver{

	protected static final int QUEUE_SIZE = 10;
	protected int id;
	protected Queue<Instruction> instructionQueue;
	protected Timer timer;
	protected ControllerSubject subject;
	
	protected MachineCapabilityBehavior behavior;
	
	public Controller(ControllerSubject subject, int controllerID){
		
		this.subject = subject;
		this.subject.registerControllerObserver(this);
		
		this.id = controllerID;
		
		this.instructionQueue = new ArrayBlockingQueue<Instruction>(QUEUE_SIZE);
		
		this.timer = new Timer();
		this.timer.schedule(new TimerTask() {
			
			@Override
			public void run(){
				
				Controller.this.behavior.makeCoffee();
			}
		}, 0, 1 * 1000);
	}
}
